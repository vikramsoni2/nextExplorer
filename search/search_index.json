{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"nextExplorer Documentation","text":"<p>nextExplorer is a modern, self-hosted file explorer designed for teams and homelabs who want a clean UI, fast previews, and secure access control. It ships as a single Docker container and works great behind a reverse proxy.</p> <ul> <li>Secure access with local users and optional OIDC single sign\u2011on</li> <li>Browse, preview, upload, move, and delete files across multiple volumes</li> <li>Grid and list views, dark/light themes, quick search, and a built-in code editor</li> <li>Automatic thumbnails for images and videos (FFmpeg), with configurable size/quality</li> </ul> <p>Quick start</p> <pre><code>services:\n  nextexplorer:\n    image: nxzai/explorer:latest\n    container_name: nextexplorer\n    restart: unless-stopped\n    ports:\n      - \"3000:3000\"\n    environment:\n      - NODE_ENV=production\n      - PUBLIC_URL=http://localhost:3000\n      # Optional: override the auto-generated session secret\n      # - SESSION_SECRET=please-change-me\n      # Optional OIDC (see Authentication)\n      # - OIDC_ENABLED=true\n      # - OIDC_ISSUER=https://auth.example.com/application/o/next/\n      # - OIDC_CLIENT_ID=nextexplorer\n      # - OIDC_CLIENT_SECRET=...\n      # - OIDC_SCOPES=openid profile email groups\n      # - OIDC_ADMIN_GROUPS=next-admin admins\n    volumes:\n      - /srv/nextexplorer/cache:/cache\n      - /srv/data/Projects:/mnt/Projects\n      - /srv/data/Downloads:/mnt/Downloads\n</code></pre> <p>Run it: <code>docker compose up -d</code>, then visit <code>http://localhost:3000</code>.</p> <p>What\u2019s next</p> <ul> <li>Getting Started: prerequisites, first\u2011run, volumes</li> <li>User Guide: browsing, uploads, search, editor, favorites</li> <li>Admin Guide: user management, access control, SSO</li> <li>Authentication (OIDC): Keycloak, Authentik, Authelia examples</li> <li>Reverse Proxy: <code>PUBLIC_URL</code>, trusted proxy, CORS</li> <li>Configuration: environment variables and defaults</li> <li>Deployment: Compose examples and updates</li> </ul> <p>Screenshots</p> Create a password to protect access. Unlock trusted sessions quickly. Visual grid for media\u2011heavy folders. Clean light theme option. Detail view highlights size and timestamps. Track multi\u2011file uploads with progress."},{"location":"admin-guide/","title":"Admin Guide","text":"<p>Initial setup</p> <ul> <li>On first launch, you\u2019ll see the Setup screen to create a local admin user</li> <li>This account can manage users and settings; keep the password safe</li> </ul> <p>User management</p> <ul> <li>Go to Settings \u2192 Admin \u2192 Users</li> <li>Create local users with initial passwords</li> <li>Grant admin role to trusted users</li> <li>Reset local user passwords and remove local users</li> <li>Safeguards: The last admin cannot be removed; demoting an admin is blocked</li> </ul> <p>OIDC users and roles</p> <ul> <li>When OIDC is enabled, users are created automatically on first login</li> <li>Admin elevation is claim\u2011based: if the user\u2019s <code>groups</code>/<code>roles</code>/<code>entitlements</code> contains any entry in <code>OIDC_ADMIN_GROUPS</code>, they become <code>admin</code></li> <li>Without a match, OIDC users receive the <code>user</code> role</li> </ul> <p>Access control</p> <ul> <li>Define folder rules in Settings \u2192 Access Control</li> <li>Use <code>hidden</code> to prevent specific paths from appearing in listings</li> <li>Use <code>ro</code> to allow browsing and downloading while preventing changes</li> </ul> <p>Backups</p> <ul> <li>The <code>/cache</code> directory contains your settings, users DB, and thumbnails</li> <li>Back it up periodically; keep it mounted during upgrades</li> </ul> <p>Suggested screenshots</p> <ul> <li>images/admin-users.png \u2013 Listing users and actions</li> <li>images/settings-access-control.png \u2013 Access rules in settings</li> </ul>"},{"location":"configuration/","title":"Configuration","text":"<p>Most configuration is done via environment variables. Defaults are chosen to be safe and sensible for containerized deployments.</p> <p>Core</p> <ul> <li><code>PORT</code> \u2013 API/UI port. Default: <code>3000</code>.</li> <li><code>PUBLIC_URL</code> \u2013 Fully\u2011qualified external URL (no trailing slash). Example: <code>https://files.example.com</code>. Used to derive cookies, default callback, and CORS.</li> <li><code>SESSION_SECRET</code> \u2013 Optional. If omitted, the app generates a strong random secret at startup. Set it explicitly to keep sessions stable across restarts or to share one across replicas.</li> </ul> <p>Filesystem</p> <ul> <li><code>VOLUME_ROOT</code> \u2013 Root directory inside the container that holds your mounted folders. Default: <code>/mnt</code>.</li> <li><code>CACHE_DIR</code> \u2013 App cache (settings, thumbnails). Default: <code>/cache</code>.</li> </ul> <p>Reverse proxy and CORS</p> <ul> <li><code>TRUST_PROXY</code> \u2013 Controls Express \u201ctrust proxy\u201d.</li> <li><code>false</code> disables trusting proxies</li> <li>A number (<code>1</code>, <code>2</code>) trusts that many hops</li> <li>A list (e.g. <code>loopback,uniquelocal</code> or CIDRs <code>10.0.0.0/8,...</code>)</li> <li>If set to <code>true</code>, the app maps it to <code>loopback,uniquelocal</code> for safety</li> <li>If unset but <code>PUBLIC_URL</code> is set, defaults to <code>loopback,uniquelocal</code></li> <li><code>CORS_ORIGIN</code>, <code>CORS_ORIGINS</code>, or <code>ALLOWED_ORIGINS</code> \u2013 Comma\u2011separated allowed origins. If unset and <code>PUBLIC_URL</code> is set, defaults to its origin; otherwise allows all (for local/dev use).</li> </ul> <p>Authentication (OIDC)</p> <ul> <li><code>OIDC_ENABLED</code> \u2013 <code>true|false</code> to enable SSO.</li> <li><code>OIDC_ISSUER</code> \u2013 Provider issuer URL (discovery). Examples:</li> <li>Keycloak realm: <code>https://id.example.com/realms/main</code></li> <li>Authentik app: <code>https://auth.example.com/application/o/next/</code></li> <li>Authelia: <code>https://auth.example.com</code></li> <li><code>OIDC_CLIENT_ID</code>, <code>OIDC_CLIENT_SECRET</code> \u2013 Client credentials.</li> <li><code>OIDC_SCOPES</code> \u2013 Default: <code>openid profile email</code>. Add <code>groups</code> to map admins.</li> <li><code>OIDC_ADMIN_GROUPS</code> \u2013 Space/comma separated list (case\u2011insensitive). If a user\u2019s <code>groups</code>/<code>roles</code>/<code>entitlements</code> includes any entry here, they\u2019re elevated to <code>admin</code>.</li> <li><code>OIDC_AUTHORIZATION_URL</code>, <code>OIDC_TOKEN_URL</code>, <code>OIDC_USERINFO_URL</code> \u2013 Optional manual overrides; otherwise discovered from the issuer.</li> <li><code>OIDC_CALLBACK_URL</code> \u2013 Optional explicit callback. If unset and <code>PUBLIC_URL</code> is provided, the app defaults to <code>${PUBLIC_URL}/callback</code>.</li> </ul> <p>Thumbnails and search</p> <ul> <li><code>FFMPEG_PATH</code>, <code>FFPROBE_PATH</code> \u2013 Optional paths to ffmpeg/ffprobe binaries (auto\u2011installed in the official image).</li> <li>ripgrep (<code>rg</code>) \u2013 Used for fast content/filename search. The image bundles ripgrep; the app falls back to a built\u2011in search if unavailable.</li> </ul> <p>Container user mapping</p> <ul> <li><code>PUID</code>, <code>PGID</code> \u2013 Map the container user to your host IDs so created files are owned by you. Defaults: <code>1000:1000</code>. The entrypoint adjusts ownership for <code>/app</code> and <code>/cache</code>.</li> </ul> <p>Frontend (dev only)</p> <ul> <li><code>VITE_BACKEND_ORIGIN</code> \u2013 When running the Vite dev server, proxy API calls to the backend origin (e.g. <code>http://localhost:3001</code>).</li> <li><code>VITE_API_URL</code> \u2013 Alternate way to point the SPA directly at an API base URL.</li> </ul>"},{"location":"deployment/","title":"Self-Host with Docker Compose","text":""},{"location":"deployment/#1-prerequisites","title":"1. Prerequisites","text":"<ul> <li>Docker Engine 24+ and Docker Compose v2.</li> <li>Host directories that you want to expose to the explorer.</li> <li>A writable cache directory for generated thumbnails (recommended: SSD-backed storage).</li> </ul>"},{"location":"deployment/#2-prepare-host-folders","title":"2. Prepare host folders","text":"<p>Create or pick folders you plan to mount, for example: - <code>/srv/nextexplorer/cache</code> for cached thumbnails and settings. - <code>/srv/data/Projects</code> and <code>/srv/data/Downloads</code> for content you want to browse. Ensure the Docker user has read/write permissions to each directory.</p>"},{"location":"deployment/#3-compose-file","title":"3. Compose file","text":"<p>Create <code>docker-compose.yml</code> alongside your other infrastructure files:</p> <pre><code>services:\n  nextexplorer:\n    image: nxzai/explorer:latest\n    container_name: nextexplorer\n    restart: unless-stopped\n    ports:\n      - \"3000:3000\"  # host:container\n    environment:\n      - NODE_ENV=production\n      # Optional: match the container user/group to your host IDs\n      # - PUID=1000\n      # - PGID=1000\n    volumes:\n      - /srv/nextexplorer/cache:/cache\n      - /srv/data/Projects:/mnt/Projects\n      - /srv/data/Downloads:/mnt/Downloads\n</code></pre> <p>Every folder you mount under <code>/mnt</code> becomes a top-level volume inside the app. Add as many as you need by repeating the <code>/path/on/host:/mnt/Label</code> pattern.</p>"},{"location":"deployment/#4-launch","title":"4. Launch","text":"<p>Run the stack from the directory containing your Compose file:</p> <pre><code>docker compose up -d\n</code></pre> <p>The API and UI are both served on <code>http://localhost:3000</code>.</p>"},{"location":"deployment/#5-map-container-user-ids-recommended","title":"5. Map container user IDs (recommended)","text":"<ol> <li>On the host, run <code>id -u</code> and <code>id -g</code> to capture your user and group IDs.</li> <li>Set the <code>PUID</code> and <code>PGID</code> environment variables in your Compose file so the container runs as your user.</li> <li>Restart the stack; any files created through nextExplorer will now be owned by your user on the host.</li> </ol>"},{"location":"deployment/#6-first-run-setup","title":"6. First-run setup","text":"<ol> <li>Open the app in your browser.</li> <li>Set a password when prompted; this gate protects all future sessions.</li> <li>Browse the Volumes panel to verify each mount shows up as expected.</li> <li>Start uploading or editing files\u2014thumbnails will populate the cache automatically.</li> </ol>"},{"location":"deployment/#7-updating","title":"7. Updating","text":"<p>To pull the latest release:</p> <pre><code>docker compose pull\ndocker compose up -d\n</code></pre> <p>The container persists user settings in <code>/cache</code> and never touches the contents of your mounted volumes unless you explicitly upload, move, or delete items through the UI.</p>"},{"location":"features/","title":"Features","text":""},{"location":"features/#file-management","title":"File Management","text":"<ul> <li>Browse and Preview: Navigate your files and folders with ease. Preview images, videos, and text files directly in the browser.</li> <li>File Operations: Upload, download, move, and delete files and folders.</li> <li>Multiple Views: Switch between a grid view for a visual overview and a detail view for more information.</li> <li>Light and Dark Modes: Choose between light and dark themes to suit your preference.</li> <li>Thumbnail Generation: Thumbnails for images and videos are automatically generated for faster navigation.</li> <li>Code Editor: Edit text-based files with syntax highlighting.</li> <li>Search: Search for files and folders in the current directory, and search for content inside files.</li> <li>Context Menu: A right-click context menu provides quick access to file operations like creating new files and folders.</li> <li>Resizable Sidebar: The sidebar can be resized to your liking.</li> <li>Responsive UI: The user interface is responsive and works well on different screen sizes.</li> </ul> Grid view keeps media heavy folders easy to scan. Light theme works well for bright shared spaces. Detail view surfaces metadata like file size and timestamps. Track multi-file uploads with per-item progress feedback."},{"location":"features/#user-and-access-management","title":"User and Access Management","text":"<ul> <li>Local Users: Create and manage local users with password authentication.</li> <li>OIDC Integration: Authenticate users against an external OpenID Connect provider like Keycloak, Authelia, or Google.</li> <li>Admin Settings: Manage users, including setting permissions and promoting users to administrators.</li> <li>Access Control Rules: Per\u2011folder rules to enforce read\u2011only or hidden paths.</li> <li>Favorites: Pin frequently used folders with custom icons for quick access.</li> <li>Password Protection: Protect your entire workspace with a master password.</li> <li>Password Changes: Local users can change their own passwords.</li> <li>Secure Access: Control who has access to your files and folders.</li> <li>User Menu: A user menu in the sidebar provides access to user-specific settings and actions.</li> </ul> Lock the workspace with a master password before anyone can browse. Re-enter the password to unlock trusted sessions."},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide walks you through prerequisites, first run, and common setup patterns.</p> <p>Prerequisites</p> <ul> <li>Docker Engine 24+ and Docker Compose v2</li> <li>Host folders you plan to browse (mounted into the container)</li> <li>A writable cache directory for settings and thumbnails (SSD recommended)</li> </ul> <p>Compose example</p> <pre><code>services:\n  nextexplorer:\n    image: nxzai/explorer:latest\n    restart: unless-stopped\n    ports:\n      - \"3000:3000\"\n    environment:\n      - NODE_ENV=production\n      - PUBLIC_URL=http://localhost:3000\n      # Optional: override the auto-generated session secret\n      # - SESSION_SECRET=please-change-me\n      # Optional: run as your host UID/GID\n      # - PUID=1000\n      # - PGID=1000\n    volumes:\n      - /srv/nextexplorer/cache:/cache\n      - /srv/data/Projects:/mnt/Projects\n      - /srv/data/Downloads:/mnt/Downloads\n</code></pre> <p>Volumes</p> <ul> <li>Every folder you mount under <code>/mnt</code> appears as a top\u2011level volume in the sidebar</li> <li>Add as many volumes as you want using <code>/host/path:/mnt/Label</code></li> <li>The <code>/cache</code> mount persists settings, user database, and thumbnails</li> </ul> <p>First run</p> <ol> <li>Start the stack: <code>docker compose up -d</code></li> <li>Open <code>http://localhost:3000</code></li> <li>Create the first local admin account on the Setup screen</li> <li>Browse the Volumes panel; confirm mounts appear and are readable</li> <li>Optional: Configure OIDC if your organization uses SSO (see Authentication)</li> </ol> <p>Sign\u2011in options</p> <ul> <li>Local users: username/password you created on first run</li> <li>OIDC SSO: if enabled, use the \u201cContinue with Single Sign\u2011On\u201d button. The backend exposes <code>/login</code> and <code>/logout</code> via Express OpenID Connect.</li> </ul> <p>Updating the container</p> <pre><code>docker compose pull\ndocker compose up -d\n</code></pre> <p>The app stores settings and thumbnails under <code>/cache</code>. Keep this volume mounted to preserve state across upgrades.</p>"},{"location":"oidc-authelia/","title":"Authelia (OIDC) Setup","text":"<p>This guide configures Authelia as an OpenID Connect (OIDC) Identity Provider for nextExplorer. It\u2019s tailored to this project\u2019s backend, which uses Express OpenID Connect (EOC), and the environment variables supported in <code>backend/config/index.js</code>.</p> <p>What you get - Authorization Code flow with a confidential client - Discovery via <code>/.well-known/openid-configuration</code> using <code>OIDC_ISSUER</code> - Default callback at <code>/callback</code> - Admin elevation based on OIDC group claims</p> <p>Requirements - Two hostnames (recommended): one for Authelia (e.g., <code>auth.example.com</code>), one for nextExplorer (e.g., <code>files.example.com</code>). - TLS certificates on both (OIDC cookies are Secure over HTTPS). - Docker and Docker Compose.</p> <p>Terminology used below - App URL: the externally reachable URL of nextExplorer (e.g., <code>https://files.example.com</code>). - Issuer URL: the externally reachable base URL of Authelia (e.g., <code>https://auth.example.com</code>).</p> <p>1) Stand up Authelia</p> <p>You can run Authelia alongside your stack. The example below uses: - Redis for session storage (recommended) - SQLite for Authelia storage (simple single-node setup) - File-backed users (local YAML) with groups to map nextExplorer admins</p> <p>docker-compose for Authelia</p> <pre><code>services:\n  redis:\n    image: redis:7-alpine\n    command: [\"redis-server\", \"--appendonly\", \"yes\"]\n    volumes:\n      - ./authelia/redis:/data\n\n  authelia:\n    image: authelia/authelia:latest\n    container_name: authelia\n    depends_on: [redis]\n    environment:\n      - TZ=UTC\n    volumes:\n      - ./authelia/config:/config\n    ports:\n      - \"9091:9091\"  # adjust or put behind a reverse proxy with TLS\n    restart: unless-stopped\n</code></pre> <p>Create directory structure (on the host where you run the above compose):</p> <pre><code>mkdir -p authelia/config authelia/redis\n</code></pre> <p>Generate secrets - JWT/session secrets and OIDC keys must be unique, long, and secret.</p> <pre><code># 64-byte hex secrets\nopenssl rand -hex 64 &gt; authelia/config/jwt_secret.txt\nopenssl rand -hex 64 &gt; authelia/config/session_secret.txt\nopenssl rand -hex 64 &gt; authelia/config/storage_encryption_key.txt\n\n# OIDC issuer private key (RSA 2048)\nopenssl genrsa -out authelia/config/oidc_issuer_key.pem 2048\n</code></pre> <p>Create <code>authelia/config/users_database.yml</code> (example users with groups):</p> <pre><code>users:\n  alice:\n    displayname: \"Alice Example\"\n    password: \"$argon2id$v=19$m=65536,t=3,p=2$REPLACE_ME_SALT$REPLACE_ME_HASH\" # replace with a real hash\n    email: alice@example.com\n    groups:\n      - users\n      - next-admin\n  bob:\n    displayname: \"Bob Example\"\n    password: \"$argon2id$v=19$m=65536,t=3,p=2$REPLACE_ME_SALT$REPLACE_ME_HASH\"\n    email: bob@example.com\n    groups:\n      - users\n</code></pre> <p>Generate proper password hashes</p> <pre><code># Inside the Authelia container or using the official image:\ndocker run --rm -it authelia/authelia:latest authelia hash generate argon2 --password 'S3cureP@ssw0rd'\n\n# Replace the password fields above with the printed hash\n</code></pre> <p>Create <code>authelia/config/configuration.yml</code> (minimal, OIDC-focused):</p> <pre><code>server:\n  address: \"tcp://:9091\"\n\nlog:\n  level: info\n\ntheme: auto\n\ndefault_redirection_url: \"https://files.example.com\"  # your app URL\n\nauthentication_backend:\n  file:\n    path: /config/users_database.yml\n    password:\n      algorithm: argon2id\n\nsession:\n  name: authelia_session\n  same_site: Lax\n  expiration: 1h\n  inactivity: 5m\n  remember_me_duration: 1M\n  secret_file: /config/session_secret.txt\n  redis:\n    host: redis\n    port: 6379\n\nstorage:\n  local:\n    path: /config/db.sqlite3\n  encryption_key_file: /config/storage_encryption_key.txt\n\naccess_control:\n  default_policy: one_factor\n\nidentity_providers:\n  oidc:\n    enable: true\n    # HMAC used for introspection and ID Token signing metadata\n    hmac_secret_file: /config/jwt_secret.txt\n    issuer_private_key_file: /config/oidc_issuer_key.pem\n    lifespans:\n      id_token: 1h\n      access_token: 1h\n      refresh_token: 90d\n    clients:\n      - client_id: nextexplorer\n        client_name: nextExplorer\n        client_secret: \"CHANGE_ME_STRONG_SECRET\"\n        # Standard confidential client using the Authorization Code flow\n        public: false\n        authorization_policy: one_factor\n        redirect_uris:\n          - \"https://files.example.com/callback\"  # prod\n          # - \"http://localhost:3000/callback\"    # dev\n        scopes:\n          - openid\n          - profile\n          - email\n          - groups\n        grant_types:\n          - authorization_code\n          - refresh_token\n        response_types:\n          - code\n        token_endpoint_auth_method: client_secret_basic\n</code></pre> <p>Notes - Replace <code>files.example.com</code> with your real app domain. - If testing locally without TLS, add <code>http://localhost:3000/callback</code> to <code>redirect_uris</code>. - The <code>groups</code> scope enables a <code>groups</code> claim for admin mapping in nextExplorer. - Authelia also supports <code>client_secret_post</code>; EOC works with <code>client_secret_basic</code> out of the box.</p> <p>Start Authelia</p> <pre><code>docker compose up -d authelia redis\n</code></pre> <p>Verify discovery works</p> <pre><code>curl -fsSL https://auth.example.com/.well-known/openid-configuration | jq .issuer,.authorization_endpoint,.token_endpoint\n</code></pre> <p>2) Configure nextExplorer to use Authelia</p> <p>Set environment variables for the backend (compose snippet below). The app derives the default callback <code>PUBLIC_URL + /callback</code> if <code>OIDC_CALLBACK_URL</code> is not set.</p> <p>Compose snippet for nextExplorer</p> <pre><code>services:\n  nextexplorer:\n    image: nxzai/explorer:latest\n    ports:\n      - \"3000:3000\"\n    environment:\n      - NODE_ENV=production\n      - PUBLIC_URL=https://files.example.com\n      - SESSION_SECRET=please-change-me\n      - OIDC_ENABLED=true\n      - OIDC_ISSUER=https://auth.example.com\n      - OIDC_CLIENT_ID=nextexplorer\n      - OIDC_CLIENT_SECRET=CHANGE_ME_STRONG_SECRET\n      - OIDC_SCOPES=openid profile email groups\n      - OIDC_ADMIN_GROUPS=next-admin admins\n    volumes:\n      - /srv/nextexplorer/cache:/cache\n      - /srv/data/Projects:/mnt/Projects\n      - /srv/data/Downloads:/mnt/Downloads\n    restart: unless-stopped\n</code></pre> <p>Key behaviors (from the code) - Callback path: EOC mounts <code>/login</code>, <code>/callback</code>, <code>/logout</code>. Default callback is <code>/callback</code>. - Base URL: derived from <code>OIDC_CALLBACK_URL</code> origin, otherwise <code>PUBLIC_URL</code> (see <code>backend/app.js</code>). - Cookies: marked <code>Secure</code> only when <code>PUBLIC_URL</code> (or callback URL) is HTTPS. - Admin mapping: roles are derived from claims <code>groups</code>/<code>roles</code>/<code>entitlements</code>; if any intersect <code>OIDC_ADMIN_GROUPS</code>, user becomes <code>admin</code> (see <code>backend/services/users.js</code>).</p> <p>Start nextExplorer</p> <pre><code>docker compose up -d nextexplorer\n</code></pre> <p>3) Test the flow</p> <ul> <li>Open the app URL and click \u201cContinue with Single Sign\u2011On\u201d.</li> <li>Authenticate with Authelia.</li> <li>On success, you\u2019re redirected back to the app; the session is established.</li> <li>If your user is in <code>next-admin</code> (or any name listed in <code>OIDC_ADMIN_GROUPS</code>), you get admin capabilities.</li> </ul> <p>Endpoints exposed by the backend - <code>GET /login</code> \u2013 begins auth (also available as <code>GET /api/auth/oidc/login?redirect=/path</code>). - <code>GET /callback</code> \u2013 OIDC callback (must be registered in Authelia). - <code>GET /logout</code> \u2013 app session logout (IdP logout is not invoked by default).</p> <p>4) Troubleshooting</p> <ul> <li>Redirect URI mismatch</li> <li> <p>Ensure Authelia <code>redirect_uris</code> contains the exact <code>${PUBLIC_URL}/callback</code> used by the app.</p> </li> <li> <p>Can\u2019t discover endpoints / issuer mismatch</p> </li> <li> <p>Set <code>OIDC_ISSUER</code> to the base URL of Authelia, e.g. <code>https://auth.example.com</code> (not the discovery path itself).</p> </li> <li> <p>Users don\u2019t get admin</p> </li> <li>Include <code>groups</code> in both Authelia client <code>scopes</code> and <code>OIDC_SCOPES</code>.</li> <li> <p>Put users into a group named in <code>OIDC_ADMIN_GROUPS</code> (e.g., <code>next-admin</code>).</p> </li> <li> <p>Session seems to drop after restart</p> </li> <li> <p>Set a stable <code>SESSION_SECRET</code> value so sessions persist across container restarts.</p> </li> <li> <p>Behind a reverse proxy</p> </li> <li>Set <code>PUBLIC_URL</code> to the external URL.</li> <li>Ensure the proxy forwards <code>X-Forwarded-*</code> headers; nextExplorer configures <code>trust proxy</code> safely by default.</li> </ul> <p>Appendix A: Minimal local-only setup</p> <p>For a quick local evaluation without TLS: 1. Add <code>http://localhost:3000/callback</code> to the Authelia client <code>redirect_uris</code>. 2. Set <code>PUBLIC_URL=http://localhost:3000</code> in nextExplorer. 3. Keep <code>OIDC_ISSUER</code> pointing to your Authelia URL (e.g., <code>http://localhost:9091</code>). 4. Cookies will be non-Secure on HTTP; do not use this mode in production.</p> <p>Appendix B: Mapping additional claims</p> <p>nextExplorer reads <code>groups</code>, <code>roles</code>, and <code>entitlements</code>. If your organization uses a different claim name for group membership, map it in Authelia to one of those standard claim names.</p> <p>References - Authelia OIDC docs: https://www.authelia.com/integration/openid-connect/introduction/ - Express OpenID Connect: https://github.com/auth0/express-openid-connect - Project OIDC config reference: see <code>README.md</code> and <code>docs/source/oidc.md</code></p>"},{"location":"oidc/","title":"OIDC (OpenID Connect)","text":"<p>nextExplorer supports OIDC via Express OpenID Connect (EOC) and works with providers like Keycloak, Authentik, and Authelia.</p> <p>Endpoints</p> <ul> <li><code>/login</code> \u2013 Start login; accepts <code>?returnTo=/path</code> to redirect after auth</li> <li><code>/callback</code> \u2013 Default OIDC callback path</li> <li><code>/logout</code> \u2013 End session and (optionally) IdP logout</li> </ul> <p>Environment</p> <ul> <li><code>OIDC_ENABLED</code> \u2013 <code>true|false</code></li> <li><code>OIDC_ISSUER</code> \u2013 Provider issuer URL (discovery)</li> <li><code>OIDC_CLIENT_ID</code>, <code>OIDC_CLIENT_SECRET</code> \u2013 Client credentials</li> <li><code>OIDC_SCOPES</code> \u2013 Default <code>openid profile email</code>; add <code>groups</code></li> <li><code>OIDC_ADMIN_GROUPS</code> \u2013 Group names that grant <code>admin</code></li> <li>If <code>OIDC_CALLBACK_URL</code> is not set, the app derives <code>${PUBLIC_URL}/callback</code> when <code>PUBLIC_URL</code> is provided</li> </ul> <p>Admin mapping</p> <ul> <li>The app inspects <code>groups</code>, <code>roles</code>, and <code>entitlements</code> claims</li> <li>If any match an entry in <code>OIDC_ADMIN_GROUPS</code> (case\u2011insensitive), the user is <code>admin</code>; otherwise <code>user</code></li> </ul> <p>Keycloak (confidential client)</p> <ol> <li>Clients \u2192 Create \u2192 <code>Client ID: nextexplorer</code>, Protocol: <code>openid-connect</code></li> <li>Settings: Access Type <code>confidential</code>; Valid Redirect URIs: <code>https://files.example.com/callback</code></li> <li>Credentials: copy Client Secret</li> <li>Mappers: Add \u201cGroup Membership\u201d mapper \u2192 Token Claim Name <code>groups</code> \u2192 Full group path OFF</li> <li>Set env: <code>OIDC_ENABLED=true</code>, <code>OIDC_ISSUER=https://id.example.com/realms/main</code>, <code>OIDC_CLIENT_ID</code>, <code>OIDC_CLIENT_SECRET</code>, <code>OIDC_SCOPES=\"openid profile email groups\"</code>, <code>OIDC_ADMIN_GROUPS=\"next-admin admins\"</code></li> </ol> <p>Authentik</p> <ol> <li>Providers \u2192 OAuth2/OpenID \u2192 Create:</li> <li>Authorization flow: <code>authorization_code</code></li> <li>Redirect URIs: <code>https://files.example.com/callback</code></li> <li>Enable \u201cInclude claims in id_token\u201d (optional but convenient)</li> <li>Applications \u2192 Create \u2192 Attach the provider; Confidential app</li> <li>Claims/Scopes: Ensure <code>profile</code>, <code>email</code> are included; add a mapping for group membership to the <code>groups</code> claim (e.g., <code>member_of</code>)</li> <li>Set env: <code>OIDC_ENABLED=true</code>, <code>OIDC_ISSUER=https://auth.example.com/application/o/next/</code>, client id/secret, scopes include <code>groups</code>, and <code>OIDC_ADMIN_GROUPS</code></li> </ol> <p>Authelia</p> <ol> <li>In <code>configuration.yml</code> enable the OIDC provider and define a client:    <code>yaml    identity_providers:      oidc:        enable: true        # issuer_private_key: |        #   -----BEGIN RSA PRIVATE KEY-----        #   ...        #   -----END RSA PRIVATE KEY-----        clients:          - client_id: 'nextexplorer'            client_name: 'nextExplorer'            client_secret: 'your-client-secret'            public: false            authorization_policy: 'one_factor'            redirect_uris:              - 'https://files.example.com/callback'            scopes: ['openid','profile','email','groups']            grant_types: ['authorization_code']            response_types: ['code']</code></li> <li>Set env: <code>OIDC_ISSUER=https://auth.example.com</code>, plus client id/secret and scopes</li> </ol> <p>Compose example</p> <pre><code>services:\n  nextexplorer:\n    image: nxzai/explorer:latest\n    environment:\n      - PUBLIC_URL=https://files.example.com\n      - OIDC_ENABLED=true\n      - OIDC_ISSUER=https://auth.example.com/application/o/next/\n      - OIDC_CLIENT_ID=nextexplorer\n      - OIDC_CLIENT_SECRET=your-client-secret\n      - OIDC_SCOPES=openid profile email groups\n      - OIDC_ADMIN_GROUPS=next-admin admins\n</code></pre> <p>Troubleshooting</p> <ul> <li>invalid redirect_uri \u2013 Ensure the redirect URI in your IdP is <code>${PUBLIC_URL}/callback</code></li> <li>\u201cNot authorized\u201d after login \u2013 Ensure a stable session secret. The app auto\u2011generates one at startup; set <code>SESSION_SECRET</code> explicitly to keep it stable across restarts or to share the same secret across replicas. Also confirm cookies are allowed through your proxy.</li> <li>No admin privileges \u2013 Confirm your IdP sends <code>groups</code> (or <code>roles</code>/<code>entitlements</code>) and that <code>OIDC_ADMIN_GROUPS</code> matches</li> <li>Callback mismatch behind proxy \u2013 Set <code>PUBLIC_URL</code> to your external URL and confirm proxy forwards <code>X\u2011Forwarded\u2011*</code> headers</li> </ul>"},{"location":"releases/","title":"Release Notes","text":"<ul> <li>added OIDC support for multi-user</li> <li>added user menu in the sidebar</li> <li>added tooltips to icons</li> <li>added public url for proxies, preparation for file sharing</li> <li>sidebar now resizable</li> <li>search in the current directory for files and content inside files as well using ripgrep</li> <li>added right-click context menu for file actions</li> <li>new file creation option in context menu</li> <li>responsive sidebar, breadcrumb and view mode options</li> <li>syntax highlighting for editor</li> <li>new folder option added to context menu as well</li> </ul>"},{"location":"reverse-proxy/","title":"Running Behind a Reverse Proxy (e.g., Nginx Proxy Manager)","text":"<p>When placing nextExplorer behind a reverse proxy and a custom domain, set a single environment variable and the app will derive everything it needs:</p> <ul> <li><code>PUBLIC_URL</code> \u2013 the fully-qualified public URL for your app (no trailing slash). Example: <code>https://files.example.com</code></li> </ul> <p>What it controls: - CORS allowed origin defaults to the origin of <code>PUBLIC_URL</code> unless you explicitly set <code>CORS_ORIGINS</code>. - OIDC callback URL defaults to <code>PUBLIC_URL + /callback</code> unless you explicitly set <code>OIDC_CALLBACK_URL</code>. - Express configures a safe <code>trust proxy</code> default when <code>PUBLIC_URL</code> is provided (can be overridden with <code>TRUST_PROXY</code>).</p> <p>Compose example:</p> <pre><code>services:\n  nextexplorer:\n    image: nxzai/explorer:latest\n    environment:\n      - NODE_ENV=production\n      - PUBLIC_URL=https://files.example.com\n      # Optional: override or add more CORS origins\n      # - CORS_ORIGINS=https://files.example.com,https://admin.example.com\n      # Optional: override OIDC callback if you need a non-default path\n      # - OIDC_CALLBACK_URL=https://files.example.com/custom/callback\n    ports:\n      - \"3000:3000\"  # or run without publishing and let the proxy connect the container network\n</code></pre> <p>Nginx Proxy Manager tips: - Point your domain to the container\u2019s internal port 3000. - Enable Websockets and preserve <code>X-Forwarded-*</code> headers (enabled by default in NPM). - Terminate TLS at the proxy; nextExplorer will treat cookies as Secure in production.</p>"},{"location":"reverse-proxy/#trust-proxy-settings","title":"Trust Proxy settings","text":"<ul> <li>Default: When <code>PUBLIC_URL</code> is set and <code>TRUST_PROXY</code> is not, the app sets <code>trust proxy</code> to <code>loopback,uniquelocal</code>. This trusts only local/private reverse proxies (Docker/Traefik/Nginx on RFC1918/loopback ranges) and avoids the security risk of trusting arbitrary clients.</li> <li>Override: Set <code>TRUST_PROXY</code> explicitly for your topology. Supported values:</li> <li><code>false</code> \u2013 disable trusting proxies (Express default).</li> <li>A number (e.g. <code>1</code>, <code>2</code>) \u2013 trust that many hops in <code>X-Forwarded-For</code>.</li> <li>A string list \u2013 e.g. <code>loopback,uniquelocal</code> or CIDRs/IPs like <code>10.0.0.0/8,172.16.0.0/12,192.168.0.0/16</code>.</li> <li>Note: <code>TRUST_PROXY=true</code> is not accepted as-is; it is mapped to <code>loopback,uniquelocal</code> to prevent IP spoofing and satisfy <code>express-rate-limit</code> safety checks.</li> </ul>"},{"location":"screenshots/","title":"Screenshots","text":"<p>Existing screenshots</p> <ul> <li>images/1.png \u2013 Workspace password creation</li> <li>images/2.png \u2013 Unlock modal</li> <li>images/3.png \u2013 Grid view</li> <li>images/4.png \u2013 Light theme folder view</li> <li>images/5.png \u2013 List view with metadata</li> <li>images/6.png \u2013 Upload manager</li> </ul> <p>Recommended new screenshots to capture</p> <ul> <li>images/context-menu.png \u2013 Context menu on a file</li> <li>images/search-results.png \u2013 Search results page</li> <li>images/code-editor.png \u2013 Editor with syntax highlighting</li> <li>images/image-preview.png \u2013 Fullscreen image preview</li> <li>images/video-preview.png \u2013 Video preview playing</li> <li>images/favorites.png \u2013 Favorites list with custom icons</li> <li>images/settings-security.png \u2013 Authentication toggle</li> <li>images/settings-thumbnails.png \u2013 Thumbnails settings</li> <li>images/settings-access-control.png \u2013 Access control rules</li> <li>images/admin-users.png \u2013 User management view</li> <li>images/oidc-login.png \u2013 Login page with \u201cSingle Sign\u2011On\u201d button</li> </ul>"},{"location":"settings/","title":"Settings","text":"<p>Open Settings from the sidebar menu. Admin\u2011only sections are visible when your account has the <code>admin</code> role.</p> <p>Authentication</p> <ul> <li>Enable authentication \u2013 When turned off, all API routes are public. Use only in trusted networks.</li> <li>OIDC configuration is set via environment variables (see Configuration). Admin elevation is controlled by <code>OIDC_ADMIN_GROUPS</code>.</li> </ul> <p>Files &amp; Thumbnails (Admin)</p> <ul> <li>Enable thumbnails \u2013 Turn off to reduce CPU/disk usage</li> <li>Thumbnail quality \u2013 1 to 100 (default 70)</li> <li>Max dimension \u2013 Longest side in pixels (default 200)</li> <li>Notes: Images use sharp; video previews require FFmpeg/ffprobe which are included in the official image</li> </ul> <p>Access Control (Admin)</p> <ul> <li>Add per\u2011folder rules with path, recursion, and permissions:</li> <li><code>rw</code> \u2013 Read/Write</li> <li><code>ro</code> \u2013 Read\u2011Only</li> <li><code>hidden</code> \u2013 Not visible in listings and cannot be accessed</li> <li>Rules are first\u2011match wins; paths are relative to the logical root (e.g., <code>Projects/Team</code>)</li> </ul> <p>Admin Users</p> <ul> <li>Create local users, reset passwords, grant admin role</li> <li>You cannot demote an admin via the UI, and the backend prevents removing the last admin</li> </ul> <p>Suggested screenshots</p> <ul> <li>images/settings-security.png \u2013 Toggle authentication</li> <li>images/settings-thumbnails.png \u2013 Thumbnail settings</li> <li>images/settings-access-control.png \u2013 Folder rules table</li> <li>images/admin-users.png \u2013 User management view</li> </ul>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>Common issues and fixes</p> <p>Authentication</p> <ul> <li>OIDC login fails with redirect error</li> <li>Ensure your IdP has the redirect URI set to <code>${PUBLIC_URL}/callback</code></li> <li>Verify <code>PUBLIC_URL</code> matches your external URL and the proxy forwards <code>X\u2011Forwarded\u2011Proto</code>/<code>Host</code></li> <li>Not staying signed in behind proxy</li> <li>Confirm cookies are not stripped; set <code>TRUST_PROXY</code> appropriately (see Reverse Proxy)</li> <li>Set a stable <code>SESSION_SECRET</code> (the app auto\u2011generates one if omitted; set explicitly to rotate or for multi\u2011replica)</li> <li>OIDC users not admin</li> <li>Include <code>groups</code> in <code>OIDC_SCOPES</code> and map groups in your IdP</li> <li>Set <code>OIDC_ADMIN_GROUPS</code> to the expected group names (case\u2011insensitive)</li> </ul> <p>Access &amp; permissions</p> <ul> <li>\u201cPath is read\u2011only\u201d or missing items</li> <li>Check Settings \u2192 Access Control rules; the first matching rule applies (<code>ro</code> or <code>hidden</code>)</li> <li>Verify the host path permissions for the mounted volume</li> <li>\u201cPath not found\u201d after changing mounts</li> <li>Restart the container if you updated your <code>docker-compose.yml</code> mounts</li> </ul> <p>Search</p> <ul> <li>Slow or incomplete results</li> <li>Install ripgrep (<code>rg</code>) on custom images; the official image includes it</li> <li>The built\u2011in fallback skips content search for large files over 5 MB</li> </ul> <p>Thumbnails</p> <ul> <li>No video thumbnails</li> <li>Ensure FFmpeg/ffprobe are available (included in official image)</li> <li>You can override binary paths with <code>FFMPEG_PATH</code>/<code>FFPROBE_PATH</code></li> </ul> <p>Reverse proxy</p> <ul> <li>CORS errors in browser console</li> <li>Set <code>PUBLIC_URL</code> and/or <code>CORS_ORIGINS</code> to include your site\u2019s origin</li> <li>Avoid <code>*</code> in production unless you fully understand the implications</li> </ul> <p>Upgrades and data</p> <ul> <li>Settings/users lost after update</li> <li>Make sure <code>/cache</code> is mounted to a persistent host folder</li> <li>Back up <code>/cache/app-config.json</code> and the <code>thumbnails</code> subfolder as needed</li> </ul>"},{"location":"user-guide/","title":"User Guide","text":"<p>Overview</p> <ul> <li>Sidebar: Favorites and Volumes</li> <li>Toolbar: navigation, breadcrumb, sort, view mode, search</li> <li>Main area: grid or list of items with context menu</li> <li>Footer panel: floating upload status when transfers are active</li> </ul> <p>Browse and preview</p> <ul> <li>Click a volume or favorite to open it</li> <li>Switch between Grid/List using the toolbar</li> <li>Preview images/videos/PDFs inline; image/video thumbnails are generated automatically</li> <li>Open files in the built\u2011in editor (text/code)</li> </ul> <p>Right\u2011click menu</p> <ul> <li>Right\u2011click background: New Folder, New File, Paste, Get Info</li> <li>Right\u2011click item: Get Info, Cut, Copy, Paste (on folders), Rename, Delete</li> <li>Shortcuts: \u2318/Ctrl+C, \u2318/Ctrl+V, \u2318/Ctrl+X</li> </ul> <p>Create, rename, delete</p> <ul> <li>Use the context menu or the main toolbar actions</li> <li>Rename validates names and prevents collisions</li> <li>Deleting prompts for confirmation, with batch support</li> </ul> <p>Uploads and downloads</p> <ul> <li>Use the \u201cCreate\u201d menu to upload files or folders</li> <li>Drag and drop also works into the main list</li> <li>A floating panel shows per\u2011file and overall progress; pause/resume/cancel supported</li> <li>Select one or more files/folders and choose Download to get a ZIP (if multiple or any folder is selected)</li> </ul> <p>Search</p> <ul> <li>Click the search icon and type to search within the current folder (and subfolders)</li> <li>Matches include filenames, directory names, and file contents (ripgrep backed)</li> </ul> <p>Favorites</p> <ul> <li>To pin a frequently used folder, open it and click the star in the toolbar</li> <li>Favorites appear in the sidebar under \u201cQuick access\u201d with customizable icons</li> </ul> <p>Editor</p> <ul> <li>Open a file and choose \u201cEdit\u201d to launch the code editor</li> <li>Syntax highlighting is auto\u2011detected from file extension</li> <li>Save with \u2318/Ctrl+S; Cancel returns to the parent folder</li> </ul>"}]}