import{_ as a,c as i,o as e,ag as t}from"./chunks/framework.Clp4v-ho.js";const k=JSON.parse('{"title":"Deployment","description":"","frontmatter":{},"headers":[],"relativePath":"installation/deployment.md","filePath":"installation/deployment.md"}'),n={name:"installation/deployment.md"};function l(o,s,r,h,d,p){return e(),i("div",null,[...s[0]||(s[0]=[t(`<h1 id="deployment" tabindex="-1">Deployment <a class="header-anchor" href="#deployment" aria-label="Permalink to &quot;Deployment&quot;">​</a></h1><p>Deploy nextExplorer via Docker Compose for reproducible self-hosted workflows. This guide outlines the folders, networking, and procedures you’ll rely on for production-ready setups.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li><strong>Docker Engine 24+ and Docker Compose v2</strong> (or later). The official image depends on modern orchestration features.</li><li><strong>Host directories</strong> for data volumes, <code>/config</code>, and optional <code>/cache</code> (make sure the Docker user can read/write these paths).</li><li><strong>TLS-capable reverse proxy</strong> if you need HTTPS, custom domains, or sticky sessions.</li></ul><h2 id="host-folder-layout" tabindex="-1">Host folder layout <a class="header-anchor" href="#host-folder-layout" aria-label="Permalink to &quot;Host folder layout&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Purpose</th><th>Container path</th><th>Notes</th></tr></thead><tbody><tr><td>Configuration, user DB, extensions</td><td><code>/config</code></td><td>Holds SQLite, <code>app-config.json</code>, and upgrades. Back this directory up before changes.</td></tr><tr><td>Thumbnail/search cache</td><td><code>/cache</code></td><td>Regenerable; safe to delete when troubleshooting.</td></tr><tr><td>Browsable data</td><td><code>/mnt/Label</code></td><td>Each mount appears as a top-level volume with the given label.</td></tr></tbody></table><h2 id="production-compose-example" tabindex="-1">Production compose example <a class="header-anchor" href="#production-compose-example" aria-label="Permalink to &quot;Production compose example&quot;">​</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  nextexplorer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nxzai/explorer:latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nextexplorer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3000:3000&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">NODE_ENV=production</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PUBLIC_URL=https://files.example.com</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SESSION_SECRET=please-change-me</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PUID=1000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PGID=1000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/srv/nextexplorer/config:/config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/srv/nextexplorer/cache:/cache</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/srv/data/Projects:/mnt/Projects</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/srv/data/Media:/mnt/Media</span></span></code></pre></div><ul><li><code>PUBLIC_URL</code> informs the backend&#39;s cookie settings, CORS, and default OIDC callback (see <code>backend/config/env.js</code>).</li><li><code>SESSION_SECRET</code> ensures sessions persist across restarts; without it, the app generates a random secret each time.</li></ul><h2 id="launching-and-validating" tabindex="-1">Launching and validating <a class="header-anchor" href="#launching-and-validating" aria-label="Permalink to &quot;Launching and validating&quot;">​</a></h2><ol><li>Run <code>docker compose up -d</code> from the folder containing your Compose file.</li><li>Visit <code>http://localhost:3000</code> (or your <code>PUBLIC_URL</code>) and finish the setup wizard.</li><li>Create a local admin/workspace password, then revisit Settings to adjust thumbnails, access control, and users.</li><li>Confirm each <code>Label</code> shows up in the sidebar and that you can browse/upload files.</li></ol><h2 id="managing-updates" tabindex="-1">Managing updates <a class="header-anchor" href="#managing-updates" aria-label="Permalink to &quot;Managing updates&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><ul><li>Persistent state (<code>app.db</code>, <code>app-config.json</code>, extensions) stays inside <code>/config</code>. Always back this up before major upgrades.</li><li>The default entrypoint moves legacy config files from <code>/cache</code> to <code>/config</code> on first run; keep <code>/config</code> mounted to avoid data loss.</li></ul><h2 id="monitoring-logs" tabindex="-1">Monitoring &amp; logs <a class="header-anchor" href="#monitoring-logs" aria-label="Permalink to &quot;Monitoring &amp; logs&quot;">​</a></h2><ul><li>Use <code>LOG_LEVEL</code>, <code>DEBUG</code>, and <code>ENABLE_HTTP_LOGGING</code> (from <code>backend/config/env.js</code>) to tune logging verbosity.</li><li>The container writes logs to stdout/stderr; stitch them together with your orchestrator (Docker logs, systemd, etc.).</li></ul>`,16)])])}const g=a(n,[["render",l]]);export{k as __pageData,g as default};
