import{_ as o,c as i,o as t,ae as c}from"./chunks/framework.BefrkHQ3.js";const f=JSON.parse('{"title":"Configuration","description":"","frontmatter":{},"headers":[],"relativePath":"configuration.md","filePath":"configuration.md"}'),a={name:"configuration.md"};function l(d,e,s,n,r,p){return t(),i("div",null,[...e[0]||(e[0]=[c('<h1 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h1><p>Most configuration is done via environment variables. Defaults are chosen to be safe and sensible for containerized deployments.</p><p>Core</p><ul><li><code>PORT</code> – API/UI port. Default: <code>3000</code>.</li><li><code>PUBLIC_URL</code> – Fully‑qualified external URL (no trailing slash). Example: <code>https://files.example.com</code>. Used to derive cookies, default callback, and CORS.</li><li><code>SESSION_SECRET</code> – Optional. If omitted, the app generates a strong random secret at startup. Set it explicitly to keep sessions stable across restarts or to share one across replicas.</li></ul><p>Filesystem</p><ul><li><code>VOLUME_ROOT</code> – Root directory inside the container that holds your mounted folders. Default: <code>/mnt</code>.</li><li><code>CACHE_DIR</code> – App cache (settings, thumbnails). Default: <code>/cache</code>.</li></ul><p>Reverse proxy and CORS</p><ul><li><code>TRUST_PROXY</code> – Controls Express “trust proxy”. <ul><li><code>false</code> disables trusting proxies</li><li>A number (<code>1</code>, <code>2</code>) trusts that many hops</li><li>A list (e.g. <code>loopback,uniquelocal</code> or CIDRs <code>10.0.0.0/8,...</code>)</li><li>If set to <code>true</code>, the app maps it to <code>loopback,uniquelocal</code> for safety</li><li>If unset but <code>PUBLIC_URL</code> is set, defaults to <code>loopback,uniquelocal</code></li></ul></li><li><code>CORS_ORIGIN</code>, <code>CORS_ORIGINS</code>, or <code>ALLOWED_ORIGINS</code> – Comma‑separated allowed origins. If unset and <code>PUBLIC_URL</code> is set, defaults to its origin; otherwise allows all (for local/dev use).</li></ul><p>Authentication (OIDC)</p><ul><li><code>OIDC_ENABLED</code> – <code>true|false</code> to enable SSO.</li><li><code>OIDC_ISSUER</code> – Provider issuer URL (discovery). Examples: <ul><li>Keycloak realm: <code>https://id.example.com/realms/main</code></li><li>Authentik app: <code>https://auth.example.com/application/o/next/</code></li><li>Authelia: <code>https://auth.example.com</code></li></ul></li><li><code>OIDC_CLIENT_ID</code>, <code>OIDC_CLIENT_SECRET</code> – Client credentials.</li><li><code>OIDC_SCOPES</code> – Default: <code>openid profile email</code>. Add <code>groups</code> to map admins.</li><li><code>OIDC_ADMIN_GROUPS</code> – Space/comma separated list (case‑insensitive). If a user’s <code>groups</code>/<code>roles</code>/<code>entitlements</code> includes any entry here, they’re elevated to <code>admin</code>.</li><li><code>OIDC_AUTHORIZATION_URL</code>, <code>OIDC_TOKEN_URL</code>, <code>OIDC_USERINFO_URL</code> – Optional manual overrides; otherwise discovered from the issuer.</li><li><code>OIDC_CALLBACK_URL</code> – Optional explicit callback. If unset and <code>PUBLIC_URL</code> is provided, the app defaults to <code>${PUBLIC_URL}/callback</code>.</li></ul><p>Thumbnails and search</p><ul><li><code>FFMPEG_PATH</code>, <code>FFPROBE_PATH</code> – Optional paths to ffmpeg/ffprobe binaries (auto‑installed in the official image).</li><li>ripgrep (<code>rg</code>) – Used for fast content/filename search. The image bundles ripgrep; the app falls back to a built‑in search if unavailable.</li></ul><p>Container user mapping</p><ul><li><code>PUID</code>, <code>PGID</code> – Map the container user to your host IDs so created files are owned by you. Defaults: <code>1000:1000</code>. The entrypoint adjusts ownership for <code>/app</code> and <code>/cache</code>.</li></ul><p>Frontend (dev only)</p><ul><li><code>VITE_BACKEND_ORIGIN</code> – When running the Vite dev server, proxy API calls to the backend origin (e.g. <code>http://localhost:3001</code>).</li><li><code>VITE_API_URL</code> – Alternate way to point the SPA directly at an API base URL.</li></ul>',16)])])}const _=o(a,[["render",l]]);export{f as __pageData,_ as default};
