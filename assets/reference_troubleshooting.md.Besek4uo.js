import{_ as o,c as s,o as r,ag as t}from"./chunks/framework.Clp4v-ho.js";const p=JSON.parse('{"title":"Troubleshooting","description":"","frontmatter":{},"headers":[],"relativePath":"reference/troubleshooting.md","filePath":"reference/troubleshooting.md"}'),a={name:"reference/troubleshooting.md"};function n(i,e,c,d,l,h){return r(),s("div",null,[...e[0]||(e[0]=[t('<h1 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h1><p>Keep this page handy when deployment, authentication, or UI behaviors need quick fixes.</p><h2 id="authentication-sessions" tabindex="-1">Authentication &amp; sessions <a class="header-anchor" href="#authentication-sessions" aria-label="Permalink to &quot;Authentication &amp; sessions&quot;">​</a></h2><ul><li><strong>OIDC redirect errors:</strong> Make sure your identity provider uses <code>${PUBLIC_URL}/callback</code> (or <code>OIDC_CALLBACK_URL</code>) as the redirect URI.</li><li><strong>Session resets after restart:</strong> Set <code>SESSION_SECRET</code> so the app doesn’t regenerate a new secret each start.</li><li><strong>Users not admin:</strong> Confirm that the user’s <code>groups</code>, <code>roles</code>, or <code>entitlements</code> include a value listed in <code>OIDC_ADMIN_GROUPS</code> (case-insensitive).</li><li><strong>Cookies marked insecure behind HTTPS:</strong> Ensure <code>PUBLIC_URL</code> uses <code>https</code> and your proxy forwards <code>X-Forwarded-Proto</code> and <code>Host</code>.</li></ul><h2 id="access-permissions" tabindex="-1">Access &amp; permissions <a class="header-anchor" href="#access-permissions" aria-label="Permalink to &quot;Access &amp; permissions&quot;">​</a></h2><ul><li><strong>Path marked read-only or hidden:</strong> Check Settings → Access Control for matching rules; <code>hidden</code> and <code>ro</code> rules block writes even if user has permission.</li><li><strong>Missing volume entries:</strong> Confirm your <code>docker-compose</code> mounts include <code>/mnt/Label</code> entries and the container has read access.</li><li><strong>Path not found after remounting:</strong> Restart the container whenever you change <code>docker-compose.yml</code> mounts so the app rescans volumes.</li></ul><h2 id="search-thumbnails" tabindex="-1">Search &amp; thumbnails <a class="header-anchor" href="#search-thumbnails" aria-label="Permalink to &quot;Search &amp; thumbnails&quot;">​</a></h2><ul><li><strong>Slow or missing search results:</strong> Install or enable ripgrep. The official image bundles <code>rg</code>; custom builds need either the tool or fallback search (which may skip large files controlled by <code>SEARCH_MAX_FILESIZE</code>).</li><li><strong>Thumbnails not generating:</strong> Verify FFmpeg/ffprobe are available (paths override via <code>FFMPEG_PATH</code>/<code>FFPROBE_PATH</code>) and that <code>/cache</code> is writable.</li><li><strong>Cache rebuild:</strong> Clearing <code>/cache</code> removes thumbnails/indexes but keeps user data. The app regenerates thumbnails when you revisit folders.</li></ul><h2 id="reverse-proxy-issues" tabindex="-1">Reverse proxy issues <a class="header-anchor" href="#reverse-proxy-issues" aria-label="Permalink to &quot;Reverse proxy issues&quot;">​</a></h2><ul><li><strong>CORS errors:</strong> Set <code>PUBLIC_URL</code>, <code>CORS_ORIGINS</code>, or <code>ALLOWED_ORIGINS</code> to include the domain you access from.</li><li><strong>Websocket or upload failures:</strong> Ensure the proxy forwards WebSocket upgrades and <code>X-Forwarded-*</code> headers.</li><li><strong>Trust proxy misconfiguration:</strong> Set <code>TRUST_PROXY</code> to <code>loopback,uniquelocal</code>, a number of hops, or explicit CIDRs depending on your topology.</li></ul><h2 id="updates-persistence" tabindex="-1">Updates &amp; persistence <a class="header-anchor" href="#updates-persistence" aria-label="Permalink to &quot;Updates &amp; persistence&quot;">​</a></h2><ul><li><strong>Settings lost after update:</strong> Mount <code>/config</code> persistently; it contains <code>app.db</code>, <code>app-config.json</code>, and extensions. Back it up before upgrading.</li><li><strong><code>/cache</code> filling disk:</strong> <code>/cache</code> holds thumbnails and indexes; delete it if you need to reclaim space (the app rebuilds contents as needed).</li></ul><h2 id="onlyoffice-token-errors" tabindex="-1">ONLYOFFICE token errors <a class="header-anchor" href="#onlyoffice-token-errors" aria-label="Permalink to &quot;ONLYOFFICE token errors&quot;">​</a></h2><ul><li>“Document security token is not correctly configured” typically means the Document Server and nextExplorer share mismatched <code>ONLYOFFICE_SECRET</code>. Double-check the secret stored in <code>/etc/onlyoffice/documentserver/local.json</code> and update both sides to match.</li></ul>',14)])])}const m=o(a,[["render",n]]);export{p as __pageData,m as default};
